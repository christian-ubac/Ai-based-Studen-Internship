import{_ as D,r as h,e as M,f as N,o as r,c,b as e,g as z,d as v,t as n,F as g,h as y,n as f,i as O,j as w}from"./index-49dffa98.js";/* empty css                                                       */const V={class:"recommendations-container"},A={key:0,class:"loading-state"},B={key:1,class:"error-state"},J={key:2,class:"recommendations-list"},R={class:"match-stats"},$={class:"job-header"},b={class:"job-title-section"},F={class:"job-meta"},L={class:"location"},P={class:"posted-date"},T={class:"skills-section"},E={class:"skills-match"},U={class:"job-footer"},Y={class:"description"},q={class:"actions"},H=["href"],W=["onClick"],G={key:3,class:"empty-state"},K={__name:"Recommendations",setup(Q){const l=h([]),d=h(!0),u=h(null),i=h([]),k=M();function S(a){const t=new Date(a),s=Math.floor((new Date-t)/(1e3*60*60*24));return s===0?"Today":s===1?"Yesterday":s<7?`${s} days ago`:t.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function I(a,t){return a.length<=t?a:a.substring(0,t).trim()+"..."}function C(a){const t=i.value.indexOf(a.id);t===-1?i.value.push(a.id):i.value.splice(t,1),localStorage.setItem("savedJobs",JSON.stringify(i.value))}async function _(){d.value=!0,u.value=null;try{const a=k.query.resumeId;if(a)try{const s=localStorage.getItem(`recommendations_for_resume_${a}`);if(s){const p=JSON.parse(s);l.value=p.map(m=>({...m,match_score:typeof m.match_score=="number"?m.match_score:50,posted_date:m.posted_date||new Date().toISOString()})),l.value.sort((m,x)=>x.match_score-m.match_score),localStorage.removeItem(`recommendations_for_resume_${a}`),d.value=!1;return}}catch(s){console.warn("Failed to read cached recommendations",s)}const t=await fetch(`/api/get-recommendations${a?`?resumeId=${a}`:""}`);if(!t.ok){const s=await t.json().catch(()=>({}));throw new Error(s.message||"Failed to fetch recommendations")}const o=await t.json();l.value=o.map(s=>({...s,match_score:typeof s.match_score=="number"?s.match_score:50,posted_date:s.posted_date||new Date().toISOString()})),l.value.sort((s,p)=>p.match_score-s.match_score)}catch(a){console.error("Recommendation fetch error:",a),u.value="Unable to load recommendations. Please try again later."}finally{d.value=!1}}return N(()=>{const a=localStorage.getItem("savedJobs");a&&(i.value=JSON.parse(a)),_()}),(a,t)=>(r(),c("div",V,[t[7]||(t[7]=e("div",{class:"header"},[e("h2",null,"Your AI-Powered Internship Matches"),e("p",{class:"subtitle"},"Matches are ranked by skill alignment and updated regularly")],-1)),d.value?(r(),c("div",A,[...t[0]||(t[0]=[z('<div class="loading-spinner" data-v-c17486a1><svg class="animate-spin" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-c17486a1><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-c17486a1></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" data-v-c17486a1></path></svg></div><div class="loading-text" data-v-c17486a1><p class="primary" data-v-c17486a1>Analyzing your resume...</p><p class="secondary" data-v-c17486a1>Matching with our AI internship database</p></div>',2)])])):v("",!0),u.value?(r(),c("div",B,[t[1]||(t[1]=e("div",{class:"error-icon"},"‚ö†Ô∏è",-1)),t[2]||(t[2]=e("h3",null,"Oops! Something went wrong",-1)),e("p",null,n(u.value),1),e("button",{onClick:_,class:"retry-button"}," Try Again ")])):v("",!0),!d.value&&!u.value&&l.value.length>0?(r(),c("div",J,[e("div",R,[e("p",null,"Found "+n(l.value.length)+" matches based on your profile",1)]),(r(!0),c(g,null,y(l.value,o=>(r(),c("div",{key:o.id,class:f(["job-card",{"high-match":o.match_score>=85}])},[e("div",$,[e("div",b,[e("h3",null,n(o.title),1),e("span",{class:"match-score",style:O({"--score":o.match_score+"%"})},n(o.match_score)+"% Match ",5)]),e("h4",null,n(o.company_name),1),e("div",F,[e("span",L,[t[3]||(t[3]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"})],-1)),w(" "+n(o.location),1)]),e("span",P,"Posted "+n(S(o.posted_date)),1)])]),e("div",T,[t[4]||(t[4]=e("h5",null,"Matching Skills",-1)),e("div",E,[(r(!0),c(g,null,y(o.matched_skills,s=>(r(),c("span",{key:s,class:"skill-tag"},n(s),1))),128))])]),e("div",U,[e("p",Y,n(I(o.description,150)),1),e("div",q,[e("a",{href:o.posting_url,target:"_blank",class:"apply-button"}," View Details & Apply ",8,H),e("button",{class:f(["save-button",{saved:i.value.includes(o.id)}]),onClick:s=>C(o)},[t[5]||(t[5]=e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M19 21l-7-5-7 5V5a2 2 0 012-2h10a2 2 0 012 2z"})],-1)),w(" "+n(i.value.includes(o.id)?"Saved":"Save"),1)],10,W)])])],2))),128))])):v("",!0),!d.value&&!u.value&&l.value.length===0?(r(),c("div",G,[...t[6]||(t[6]=[e("div",{class:"empty-icon"},"üîç",-1),e("h3",null,"No matches found yet",-1),e("p",null,"We're actively searching for internships matching your profile. Check back soon or try updating your resume with more details about your skills and interests.",-1)])])):v("",!0)]))}},j=D(K,[["__scopeId","data-v-c17486a1"]]);export{j as default};
